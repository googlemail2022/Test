<!doctype html>

<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Группа «Все» — чат</title>
  <style>
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Arial, sans-serif;background:#ffffff;color:#000}
    .app{max-width:1000px;margin:0 auto;display:grid;grid-template-columns:280px 1fr;height:100vh}/* Sidebar */
.sidebar{background:#f2f2f2;padding:10px;border-right:1px solid #ddd}
.brand{font-weight:700;font-size:18px;margin-bottom:12px}
.groups{margin-top:8px}
.group{display:flex;align-items:center;padding:8px;border:1px solid #ccc;cursor:pointer;margin-bottom:8px}
.group.active{background:#e6e6e6}
.avatar{width:40px;height:40px;background:#d9d9d9;display:flex;align-items:center;justify-content:center;font-weight:700;color:#333}
.group-info{margin-left:8px;}
.group-title{font-size:15px}

/* Main chat */
.main{display:flex;flex-direction:column;background:#fff}
.messages{flex:1;padding:20px;overflow:auto;display:flex;flex-direction:column;gap:12px}
.msg{max-width:72%;padding:10px 12px;border:1px solid #ccc;background:#f2f2f2;color:#000}
.msg.me{margin-left:auto;background:#e0e0e0}
.meta{font-size:12px;color:#666;margin-bottom:6px}
.input-area{padding:10px;border-top:1px solid #ddd;display:flex;gap:10px;align-items:center}
.input{flex:1;border:1px solid #ccc;padding:10px;min-height:40px;color:#000}
.send{background:#ccc;border:1px solid #999;padding:10px 14px;color:#000;font-weight:700;cursor:pointer}
.send:disabled{opacity:.5;cursor:not-allowed}

@media (max-width:800px){.app{grid-template-columns:1fr}.sidebar{display:none}}

  </style>
</head>
<body>
  <div class="app" role="application">
    <aside class="sidebar" aria-label="Список групп">
      <div class="brand">Мои группы</div>
      <div class="groups">
        <div class="group active" data-id="all" aria-current="true">
          <div class="avatar">ВС</div>
          <div class="group-info">
            <div class="group-title">Все</div>
          </div>
        </div>
      </div>
    </aside><main class="main" aria-live="polite">
  <div id="messages" class="messages" role="log"></div>

  <div class="input-area">
    <div id="editable" class="input" contenteditable="true" role="textbox" aria-label="Напишите сообщение"></div>
    <button id="sendBtn" class="send">Отправить</button>
  </div>
</main>

  </div>  <script>
    const messagesEl = document.getElementById('messages');
    const editable = document.getElementById('editable');
    const sendBtn = document.getElementById('sendBtn');

    function formatTime(ts){
      const d = new Date(ts);
      return d.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
    }

    function renderMessage(m){
      const el = document.createElement('div');
      el.className = 'msg me';
      const meta = document.createElement('div');
      meta.className = 'meta';
      meta.textContent = 'Вы · ' + formatTime(m.ts);
      const body = document.createElement('div');
      body.textContent = m.text;
      el.appendChild(meta);
      el.appendChild(body);
      messagesEl.appendChild(el);
      messagesEl.scrollTop = messagesEl.scrollHeight - messagesEl.clientHeight;
    }

    function sendMessage(){
      const text = editable.innerText.trim();
      if(!text) return;
      const m = { text: text, ts: Date.now() };
      renderMessage(m);
      editable.innerHTML='';
      editable.focus();
    }

    sendBtn.addEventListener('click', sendMessage);
    editable.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' && !e.shiftKey){
        e.preventDefault();
        sendMessage();
      }
    });

    window.addEventListener('load', ()=>{ editable.focus(); });
  </script></body>
</html>
